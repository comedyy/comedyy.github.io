## 是什么导致的材质外观不同？

是`brdf`反射函数导致的。它处理了光线如何跟表现作用。

	1. 如果是完全的漫反射，那么它的`brdf`值是 1/Pi， 因为它往所有方向的反射量是一样的。（通过积分，具体还得算一下）



### 方位角

入射光和反射光投影到地面上的角度，就方位角。

反射：  入射的方位角跟出射的方位角 相差180度。

折射： 入射光和折射光的角度跟折射率有关。 入射的方位角跟出射的方位角 相差180度。从折射率大的物体看到折射率小的物体里，有可能出现完全的反射，而没有折射。但是如果从折射率小的物体到折射率大的物体，都会有折射。（如果从水里面往上看，只能看到头顶的一圈，圈外的因为发生完全的反射而看不到折射现象，而出现黑色）



## Fresnel Reflection(菲涅尔项)

描述一种反射现象，垂直与一个表面看这个表面，那么很少会有反射，而如果角度比较斜，那么反射率很高（比如斜着看地面，看看地面是否有积水）。

1. 绝缘体的菲涅尔项是角度，normal跟视觉的角度从0到90度的曲线详单与 Ease.cubic
2. 导体的菲列尔项目则比较平滑，基本都在0.9以上，更斜着的时候可以达到1。所以使用金属做镜子比较合适。

通用的菲涅尔项的计算： 

R(x) = R0 + (1-R0)(1-CosA)5  

R0 = ((n1 - n2) / (n1 + n2))2

n1,n2 为折射率，A为跟法线的夹角





## ## 微表面

我们看到的材质如果使用显微镜看，会看到很多凹凸不平的表面，如果是镜子那么看到的是非常平的表面。这些微表面决定了`brdf`, 从远处看不到这些凹凸平面，而只能看到这些微平面形成的`brdf`所反映出的材质。



微表面的`brdf`

f(i, o) = (F(i, h) + G(i, o, h) + D(h) )   /  4(n, i)(n, o)

i, 相机向量， o, 光源向量

h => (i + o) / 2,  half的意思

F(i, h) => 菲涅尔项

G(i, o, h) => 处理微表面的互相遮挡，直观的表现为，如果光从球的旁边射过来，那么如果没有这个项，那么球的边缘会很亮，但是边缘的微表面应该是会有互相遮挡，导致部分能量的损失，这样边缘亮度就会削弱。

D(h) => 处理的是有多少的为表面的法线为h，如果更多的为表面的法线为h,那么反射的光就更多。（假设微表面发生镜面反射）





## 法线分布

各向同性：法线分布没有分布性。入射角跟出射角的方位角旋转，如果brdf不变，那么它就是各向同性

各向异性：法线分布有分布性。入射角跟出射角的方位角旋转，如果brdf变了，那么它就是各向异性













