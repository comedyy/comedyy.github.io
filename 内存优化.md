## 项目中的内存优化总结。

1. 工具使用
MemoryProfiler: 用来分析unity的内存信息。


2.问题定位：
Native内存
    1. 拆分底包资源与正式包资源。减少双份资源。 (或者卸载登入资源，在离开登入界面之后) 
    2. 拆分城建的ui资源跟战斗的uI资源，战斗中要把所有城建的图集卸载。
    3. 图集需要优化，256 * 256的图片不能入图集，理论上1024的图集可以放16张小图，实际只能放12张左右，因为有padding。 可以考虑出两套资源，128的跟256的，128的打图集，256的单独处理。
    4. 战斗内特效优化，一个particleSystem对象，内存占用最少40K，太多的粒子会让战斗内的内存膨胀，
    5. 字体优化，目前英文包会把 英文跟中文字体，繁体字体全部加载进入内存，理论上只需要英文字体。
    6. 音频分包。
    7. 预制体中的prticle：有时候美术会直接把特效挂入预制体，导致在不知情的情况下，特效被引入了场景中，可以考虑动态加载来灵活加载。
    8. 动态申请的Texture，需要没有引用才能被unity在切换场景的时候回收（Resources.UnLoadUnusedAssets), 或者手动调用Destroy(tex)， 会导致泄漏。

Managed内存
表格优化： 表格全部加载到内存会占用大量的内存，需要有部分加载的能力，或者卸载的能力。
    我们可以直接加载全部表格，但是可能会太大，局部加载会让很多用不到的配置不用加载。

VertexHelper对象：ugui中的mesh生成缓存使用了VertexHelper对象，里面有复用的mesh信息。项目中大量使用tile类型的Image，会让这个对象撑到4M。可以考虑还一种方式，让让它回归到100K - 200K比较合适。  减少 2M左右


unity的垃圾回收不会去压缩内存，所以它会有很严重的内存问题，如果，主要是在内存的碎片化，所以ecs的world那块内存是否可以重新使用？
